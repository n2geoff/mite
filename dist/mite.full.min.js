/* Mite.js v1.0.0 | MIT License | https://github.com/n2geoff/mite */
var u=(D,m,...f)=>{if(typeof D==="function")return D({...m,children:f.flat(1/0)});let c=m&&typeof m==="object"&&!m.flat&&!m.tag;return{tag:D||"fragment",props:c?m:{},children:(c?f:[m,...f]).flat(1/0).filter((A)=>A!=null&&A!==!1&&A!=="")}},W=(D,m=!1)=>{if(typeof D!=="object")return document.createTextNode(D);if(D.tag==="fragment"){let A=document.createDocumentFragment();return D.children.forEach((L)=>A.appendChild(W(L,m))),A}let f=m||D.tag==="svg",c=f?document.createElementNS("http://www.w3.org/2000/svg",D.tag):document.createElement(D.tag);if(U(c,D.props),D.children.forEach((A)=>c.appendChild(W(A,f))),D.props?.oncreate)setTimeout(()=>D.props.oncreate(c));return c},U=(D,m={},f={})=>{let c={...f,...m};for(let A in c)if(m[A]!==f[A])J(D,A,m[A],f[A])},J=(D,m,f,c)=>{if(m.startsWith("on")){let A=m.slice(2).toLowerCase();if(c)D.removeEventListener(A,c);if(f)D.addEventListener(A,f)}else if(m==="style"){if(typeof f==="string")D.style.cssText=f;else if(D.style.cssText="",f)Object.assign(D.style,f)}else if(m in D&&m!=="list"&&m!=="form")D[m]=f==null?"":f;else if(f==null||f===!1)D.removeAttribute(m);else D.setAttribute(m,f===!0?"":f)},X=(D,m,f,c=0)=>{let A=D.childNodes[c];if(m==null)return A&&D.removeChild(A);if(!A)return D.appendChild(W(m));let L=typeof m==="object";if(L!==(typeof f==="object")||L&&(m?.tag!==f?.tag||m.props?.key!==f.props?.key))return D.replaceChild(W(m),A);if(L){U(A,m.props,f.props);let E=m.children,F=f.children,H=Math.max(E.length,F.length),O=m.tag==="fragment"?D:A;for(let $=0;$<H;$++)X(O,E[$],F[$],$>=E.length?E.length:$)}else if(A.nodeValue!==m)A.nodeValue=m},T=(D,m=!1)=>{let f={...D},c=[];return{getState:()=>f,update:(A)=>{if(f={...f,...A},m)console.log("State Update:",f);c.forEach((L)=>L(f))},subscribe:(A)=>c.push(A)}},C=(D,{view:m,routes:f,state:c={}})=>{let A=document.querySelector(D),L=c?.subscribe?c:T(c||{}),M=null,E=()=>{let F={state:L.getState(),update:L.update,params:{},content:null};if(f){let O=window.location.hash,$=O&&O.startsWith("#/")?O.slice(1):"/",B=f[$];if(!B){for(let R in f)if(R.includes(":")){let Y=new RegExp(`^${R.replace(/:[^\s/]+/g,"([^/]+)")}$`),K=$.match(Y);if(K){B=f[R];let Q=R.match(/:[^\s/]+/g);if(Q)Q.forEach((Z,_)=>params[Z.substring(1)]=K[_+1]);break}}}let I=B||f["404"];if(I)F.content=I(F)}let H=m?m(F):F.content;if(H)X(A,H,M,0),M=H};if(L.subscribe(E),f)window.addEventListener("hashchange",E);return E(),L};var z=async(D,m={})=>{let f=await fetch(D,{...m,headers:{"Content-Type":"application/json",...m.headers}}),c=f.status!==204?await f.json():null;if(!f.ok)throw Error(c?.message||f.statusText);return c},j={get:(D,m)=>z(D,{...m,method:"GET"}),post:(D,m,f)=>z(D,{...f,method:"POST",body:JSON.stringify(m)}),put:(D,m,f)=>z(D,{...f,method:"PUT",body:JSON.stringify(m)}),del:(D,m)=>z(D,{...m,method:"DELETE"})};var q=(D,m=document)=>{let f=typeof D==="string"?Array.from(m.querySelectorAll(D)):[D].flat();return{el:f,on(c,A,L){return f.forEach((M)=>M.addEventListener(c,A,L)),this},off(c,A,L){return f.forEach((M)=>M.removeEventListener(c,A,L)),this},val(c){if(c!==void 0)return f.forEach((A)=>A.value=c),this;return f[0]?.value},toggle(c){return f.forEach((A)=>A.classList.toggle(c)),this},data(){let c=f[0];if(c?.tagName!=="FORM")return{};let A=new FormData(c);return Object.fromEntries(A.entries())},validate(c){let A=f[0];if(!A||A.tagName!=="FORM")return!0;let L=A.checkValidity();if(!L&&typeof c==="function"){let M=Array.from(A.elements).filter((E)=>!E.checkValidity());c(M)}return L}}};var G=(D,...m)=>{let{href:f,...c}=D,A=window.location.hash.slice(1)||"/",L=f.startsWith("#")?f.slice(1):f,M=A===L;return h("a",{...c,href:`#${L}`,class:`${D.class||""} ${M?"active":""}`.trim()},...m)};export{T as signal,U as patchProps,J as patchProp,X as patch,C as mount,j as http,u as h,W as createElement,G as Link,q as $};
