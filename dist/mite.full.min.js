/* Mite.js v1.0.0 | MIT License | https://github.com/n2geoff/mite */
var C=(D,m,...f)=>{if(typeof D==="function")return D({...m,children:f.flat(1/0)});let L=m&&typeof m==="object"&&!m.flat&&!m.tag;return{tag:D||"fragment",props:L?m:{},children:(L?f:[m,...f]).flat(1/0).filter((A)=>A!=null&&A!==!1&&A!=="")}},R=(D,m=!1)=>{if(typeof D!=="object")return document.createTextNode(D);if(D.tag==="fragment"){let A=document.createDocumentFragment();return D.children.forEach((M)=>A.appendChild(R(M,m))),A}let f=m||D.tag==="svg",L=f?document.createElementNS("http://www.w3.org/2000/svg",D.tag):document.createElement(D.tag);if(U(L,D.props),D.children.forEach((A)=>L.appendChild(R(A,f))),D.props?.oncreate)setTimeout(()=>D.props.oncreate(L));return L},U=(D,m={},f={})=>{let L={...f,...m};for(let A in L)if(m[A]!==f[A])J(D,A,m[A],f[A])},J=(D,m,f,L)=>{if(m.startsWith("on")){let A=m.slice(2).toLowerCase();if(L)D.removeEventListener(A,L);if(f)D.addEventListener(A,f)}else if(m==="style"){if(typeof f==="string")D.style.cssText=f;else if(D.style.cssText="",f)Object.assign(D.style,f)}else if(m in D&&m!=="list"&&m!=="form")D[m]=f==null?"":f;else if(f==null||f===!1)D.removeAttribute(m);else D.setAttribute(m,f===!0?"":f)},X=(D,m,f,L=0)=>{let A=D.childNodes[L];if(m==null)return A&&D.removeChild(A);if(!A)return D.appendChild(R(m));let M=typeof m==="object";if(M!==(typeof f==="object")||M&&(m?.tag!==f?.tag||m.props?.key!==f.props?.key))return D.replaceChild(R(m),A);if(M){U(A,m.props,f.props);let $=m.children,F=f.children,u=Math.max($.length,F.length),H=m.tag==="fragment"?D:A;for(let c=0;c<u;c++)X(H,$[c],F[c],c>=$.length?$.length:c)}else if(A.nodeValue!==m)A.nodeValue=m},T=(D,m=!1)=>{let f={...D},L=[];return{getState:()=>f,update:(A)=>{if(f={...f,...A},m)console.log("State Update:",f);L.forEach((M)=>M(f))},subscribe:(A)=>L.push(A)}},S=(D,m,f={},L={})=>{let A=document.querySelector(D),M=f?.subscribe?f:T(f||{}),E=L.routes,$=null,F=()=>{let u={state:M.getState(),update:M.update,params:{},content:null};if(E){let c=window.location.hash;if(c&&!c.startsWith("#/"))return;let B=c.slice(1)||"/",z=E[B];if(!z){for(let O in E)if(O.includes(":")){let Y=new RegExp(`^${O.replace(/:[^\s/]+/g,"([^/]+)")}$`),K=B.match(Y);if(K){z=E[O];let Q=O.match(/:[^\s/]+/g);if(Q)Q.forEach((Z,_)=>u.params[Z.substring(1)]=K[_+1]);break}}}let I=z||E["404"];if(I)u.content=I(u)}let H=typeof m==="function"?m(u):u.content;if(H)X(A,H,$,0),$=H};if(M.subscribe(F),E)window.addEventListener("hashchange",F);return F(),M};var W=async(D,m={})=>{let f=await fetch(D,{...m,headers:{"Content-Type":"application/json",...m.headers}}),L=f.status!==204?await f.json():null;if(!f.ok)throw Error(L?.message||f.statusText);return L},j={get:(D,m)=>W(D,{...m,method:"GET"}),post:(D,m,f)=>W(D,{...f,method:"POST",body:JSON.stringify(m)}),put:(D,m,f)=>W(D,{...f,method:"PUT",body:JSON.stringify(m)}),del:(D,m)=>W(D,{...m,method:"DELETE"})};var q=(D,m=document)=>{let f=typeof D==="string"?Array.from(m.querySelectorAll(D)):[D].flat();return{el:f,on(L,A,M){return f.forEach((E)=>E.addEventListener(L,A,M)),this},off(L,A,M){return f.forEach((E)=>E.removeEventListener(L,A,M)),this},val(L){if(L!==void 0)return f.forEach((A)=>A.value=L),this;return f[0]?.value},toggle(L){return f.forEach((A)=>A.classList.toggle(L)),this},data(){let L=f[0];if(L?.tagName!=="FORM")return{};let A=new FormData(L);return Object.fromEntries(A.entries())},validate(L){let A=f[0];if(!A||A.tagName!=="FORM")return!0;let M=A.checkValidity();if(!M&&typeof L==="function"){let E=Array.from(A.elements).filter(($)=>!$.checkValidity());L(E)}return M}}};var G=(D,...m)=>{let{href:f,...L}=D,A=window.location.hash.slice(1)||"/",M=f.startsWith("#")?f.slice(1):f,E=A===M;return h("a",{...L,href:`#${M}`,class:`${D.class||""} ${E?"active":""}`.trim()},...m)};export{T as signal,U as patchProps,J as patchProp,X as patch,S as mount,j as http,C as h,R as createElement,G as Link,q as $};
