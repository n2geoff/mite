/* Mite.js v1.0.0 | MIT License | https://github.com/n2geoff/mite */
var u=(D,m,...f)=>{if(typeof D==="function")return D({...m,children:f.flat(1/0)});let L=m&&typeof m==="object"&&!m.flat&&!m.tag;return{tag:D||"fragment",props:L?m:{},children:(L?f:[m,...f]).flat(1/0).filter((A)=>A!=null&&A!==!1&&A!=="")}},W=(D,m=!1)=>{if(typeof D!=="object")return document.createTextNode(D);if(D.tag==="fragment"){let A=document.createDocumentFragment();return D.children.forEach((M)=>A.appendChild(W(M,m))),A}let f=m||D.tag==="svg",L=f?document.createElementNS("http://www.w3.org/2000/svg",D.tag):document.createElement(D.tag);if(U(L,D.props),D.children.forEach((A)=>L.appendChild(W(A,f))),D.props?.oncreate)setTimeout(()=>D.props.oncreate(L));return L},U=(D,m={},f={})=>{let L={...f,...m};for(let A in L)if(m[A]!==f[A])J(D,A,m[A],f[A])},J=(D,m,f,L)=>{if(m.startsWith("on")){let A=m.slice(2).toLowerCase();if(L)D.removeEventListener(A,L);if(f)D.addEventListener(A,f)}else if(m==="style"){if(typeof f==="string")D.style.cssText=f;else if(D.style.cssText="",f)Object.assign(D.style,f)}else if(m in D&&m!=="list"&&m!=="form")D[m]=f==null?"":f;else if(f==null||f===!1)D.removeAttribute(m);else D.setAttribute(m,f===!0?"":f)},X=(D,m,f,L=0)=>{let A=D.childNodes[L];if(m==null)return A&&D.removeChild(A);if(!A)return D.appendChild(W(m));let M=typeof m==="object";if(M!==(typeof f==="object")||M&&(m?.tag!==f?.tag||m.props?.key!==f.props?.key))return D.replaceChild(W(m),A);if(M){U(A,m.props,f.props);let c=m.children,F=f.children,H=Math.max(c.length,F.length),O=m.tag==="fragment"?D:A;for(let $=0;$<H;$++)X(O,c[$],F[$],$>=c.length?c.length:$)}else if(A.nodeValue!==m)A.nodeValue=m},T=(D,m=!1)=>{let f={...D},L=[];return{getState:()=>f,update:(A)=>{if(f={...f,...A},m)console.log("State Update:",f);L.forEach((M)=>M(f))},subscribe:(A)=>L.push(A)}},C=(D,{view:m,routes:f,state:L={}})=>{let A=document.querySelector(D),M=L?.subscribe?L:T(L||{}),E=null,c=()=>{let F={state:M.getState(),update:M.update,params:{},content:null};if(f){let O=window.location.hash;if(O&&!O.startsWith("#/"))return;let $=O.slice(1)||"/",B=f[$];if(!B){for(let R in f)if(R.includes(":")){let Y=new RegExp(`^${R.replace(/:[^\s/]+/g,"([^/]+)")}$`),K=$.match(Y);if(K){B=f[R];let Q=R.match(/:[^\s/]+/g);if(Q)Q.forEach((Z,_)=>F.params[Z.substring(1)]=K[_+1]);break}}}let I=B||f["404"];if(I)F.content=I(F)}let H=m?m(F):F.content;if(H)X(A,H,E,0),E=H};if(M.subscribe(c),f)window.addEventListener("hashchange",c);return c(),M};var z=async(D,m={})=>{let f=await fetch(D,{...m,headers:{"Content-Type":"application/json",...m.headers}}),L=f.status!==204?await f.json():null;if(!f.ok)throw Error(L?.message||f.statusText);return L},j={get:(D,m)=>z(D,{...m,method:"GET"}),post:(D,m,f)=>z(D,{...f,method:"POST",body:JSON.stringify(m)}),put:(D,m,f)=>z(D,{...f,method:"PUT",body:JSON.stringify(m)}),del:(D,m)=>z(D,{...m,method:"DELETE"})};var q=(D,m=document)=>{let f=typeof D==="string"?Array.from(m.querySelectorAll(D)):[D].flat();return{el:f,on(L,A,M){return f.forEach((E)=>E.addEventListener(L,A,M)),this},off(L,A,M){return f.forEach((E)=>E.removeEventListener(L,A,M)),this},val(L){if(L!==void 0)return f.forEach((A)=>A.value=L),this;return f[0]?.value},toggle(L){return f.forEach((A)=>A.classList.toggle(L)),this},data(){let L=f[0];if(L?.tagName!=="FORM")return{};let A=new FormData(L);return Object.fromEntries(A.entries())},validate(L){let A=f[0];if(!A||A.tagName!=="FORM")return!0;let M=A.checkValidity();if(!M&&typeof L==="function"){let E=Array.from(A.elements).filter((c)=>!c.checkValidity());L(E)}return M}}};var G=(D,...m)=>{let{href:f,...L}=D,A=window.location.hash.slice(1)||"/",M=f.startsWith("#")?f.slice(1):f,E=A===M;return h("a",{...L,href:`#${M}`,class:`${D.class||""} ${E?"active":""}`.trim()},...m)};export{T as signal,U as patchProps,J as patchProp,X as patch,C as mount,j as http,u as h,W as createElement,G as Link,q as $};
