/* Mite.js v1.0.0 | MIT License | https://github.com/n2geoff/mite */
var O=(B,q,...z)=>{if(typeof B==="function")return B({...q,children:z.flat(1/0)});let J=q&&typeof q==="object"&&!q.flat&&!q.tag;return{tag:B||"fragment",props:J?q:{},children:(J?z:[q,...z]).flat(1/0).filter((H)=>H!=null&&H!==!1&&H!=="")}},Z=(B,q=!1)=>{if(typeof B!=="object")return document.createTextNode(B);if(B.tag==="fragment"){let H=document.createDocumentFragment();return B.children.forEach((K)=>H.appendChild(Z(K,q))),H}let z=q||B.tag==="svg",J=z?document.createElementNS("http://www.w3.org/2000/svg",B.tag):document.createElement(B.tag);if(D(J,B.props),B.children.forEach((H)=>J.appendChild(Z(H,z))),B.props?.oncreate)setTimeout(()=>B.props.oncreate(J));return J},D=(B,q={},z={})=>{let J={...z,...q};for(let H in J)if(q[H]!==z[H])E(B,H,q[H],z[H])},E=(B,q,z,J)=>{if(q.startsWith("on")){let H=q.slice(2).toLowerCase();if(J)B.removeEventListener(H,J);if(z)B.addEventListener(H,z)}else if(q==="style"){if(typeof z==="string")B.style.cssText=z;else if(B.style.cssText="",z)Object.assign(B.style,z)}else if(q in B&&q!=="list"&&q!=="form")B[q]=z==null?"":z;else if(z==null||z===!1)B.removeAttribute(q);else B.setAttribute(q,z===!0?"":z)},I=(B,q,z,J=0)=>{let H=B.childNodes[J];if(q==null)return H&&B.removeChild(H);if(!H)return B.appendChild(Z(q));let K=typeof q==="object";if(K!==(typeof z==="object")||K&&(q?.tag!==z?.tag||q.props?.key!==z.props?.key))return B.replaceChild(Z(q),H);if(K){D(H,q.props,z.props);let U=q.children,X=z.children,W=Math.max(U.length,X.length),Y=q.tag==="fragment"?B:H;for(let L=0;L<W;L++)I(Y,U[L],X[L],L>=U.length?U.length:L)}else if(H.nodeValue!==q)H.nodeValue=q},G=(B,q=!1)=>{let z={...B},J=[];return{getState:()=>z,update:(H)=>{if(z={...z,...H},q)console.log("State Update:",z);J.forEach((K)=>K(z))},subscribe:(H)=>J.push(H)}},S=(B,q,z={},J={})=>{let H=document.querySelector(B),K=z?.subscribe?z:G(z||{}),Q=J.routes,U=null,X=()=>{let W={state:K.getState(),update:K.update,params:{},content:null};if(Q){let L=window.location.hash;if(L&&!L.startsWith("#/"))return;let R=L.slice(1)||"/",$=Q[R];if(!$){for(let _ in Q)if(_.includes(":")){let M=new RegExp(`^${_.replace(/:[^\s/]+/g,"([^/]+)")}$`),F=R.match(M);if(F){$=Q[_];let T=_.match(/:[^\s/]+/g);if(T)T.forEach((j,C)=>W.params[j.substring(1)]=F[C+1]);break}}}let A=$||Q["404"];if(A)W.content=A(W)}let Y=typeof q==="function"?q(W):W.content;if(Y)I(H,Y,U,0),U=Y};if(K.subscribe(X),Q)window.addEventListener("hashchange",X);return X(),K};export{G as signal,D as patchProps,E as patchProp,I as patch,S as mount,O as h,Z as createElement};
